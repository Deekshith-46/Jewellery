{
  "info": {
    "name": "Jewellery Backend API - Complete",
    "description": "Complete API collection for Jewellery Backend with all product endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Authentication",
      "item": [
        {
          "name": "Admin Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set('admin_token', jsonData.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "auth", "login"]
            },
            "description": "Login as admin to get authentication token. The token is automatically saved to environment variable 'admin_token'."
          }
        },
        {
          "name": "User Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set('user_token', jsonData.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"user123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "Login as user to get authentication token. The token is automatically saved to environment variable 'user_token'."
          }
        }
      ]
    },
    {
      "name": "2. User Product APIs",
      "item": [
        {
          "name": "List Products (Ready to Ship)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/products/list?tab=ready&page=1&limit=24",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "list"],
              "query": [
                {
                  "key": "tab",
                  "value": "ready",
                  "description": "Use 'ready' for Ready to Ship products"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "24"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true,
                  "description": "Search by product name or description"
                },
                {
                  "key": "category",
                  "value": "",
                  "disabled": true,
                  "description": "Filter by category"
                },
                {
                  "key": "style",
                  "value": "",
                  "disabled": true,
                  "description": "Filter by style"
                },
                {
                  "key": "shape",
                  "value": "",
                  "disabled": true,
                  "description": "Filter by shape"
                },
                {
                  "key": "minPrice",
                  "value": "",
                  "disabled": true,
                  "description": "Minimum price filter"
                },
                {
                  "key": "maxPrice",
                  "value": "",
                  "disabled": true,
                  "description": "Maximum price filter"
                },
                {
                  "key": "sort",
                  "value": "-createdAt",
                  "disabled": true,
                  "description": "Sort order (e.g., -createdAt, price, -price)"
                }
              ]
            },
            "description": "Get list of ready-to-ship products (products with available variants in stock)"
          }
        },
        {
          "name": "List Products (Design Your Own)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/products/list?tab=design&page=1&limit=24",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "list"],
              "query": [
                {
                  "key": "tab",
                  "value": "design",
                  "description": "Use 'design' for Design Your Own products"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "24"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "category",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "style",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "shape",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "minPrice",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "maxPrice",
                  "value": "",
                  "disabled": true
                }
              ]
            },
            "description": "Get list of design-your-own products (products with readyToShip=false)"
          }
        },
        {
          "name": "Get Product Detail",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/products/detail/{{product_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "detail", "{{product_id}}"]
            },
            "description": "Get detailed product information including variants and images. Returns: product, variants array, and images array."
          }
        },
        {
          "name": "Get All Products (Legacy)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/products?page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["api", "products"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true,
                  "description": "Search text"
                },
                {
                  "key": "category",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "metalType",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "style",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "shape",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "minPrice",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "maxPrice",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "sort",
                  "value": "-createdAt",
                  "disabled": true
                }
              ]
            },
            "description": "Legacy endpoint for getting all active products with filtering options"
          }
        },
        {
          "name": "Get Product by ID (Legacy)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/products/{{product_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "{{product_id}}"]
            },
            "description": "Legacy endpoint to get a single product by ID or productId"
          }
        },
        {
          "name": "Get Price for Selection",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/products/{{product_id}}/price?metal=14k_yellow_gold&quantity=1",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "{{product_id}}", "price"],
              "query": [
                {
                  "key": "metal",
                  "value": "14k_yellow_gold",
                  "description": "Metal type selection"
                },
                {
                  "key": "quantity",
                  "value": "1",
                  "description": "Quantity"
                }
              ]
            },
            "description": "Calculate price for a product based on metal selection and quantity"
          }
        }
      ]
    },
    {
      "name": "3. Admin Product APIs",
      "item": [
        {
          "name": "Create Product",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productSku\": \"RING-001\",\n  \"productName\": \"Elegant Diamond Ring\",\n  \"description\": \"Beautiful diamond ring with elegant design\",\n  \"categoryId\": \"{{category_id}}\",\n  \"styleId\": \"{{style_id}}\",\n  \"metalType\": \"14k_yellow_gold\",\n  \"shape\": \"round\",\n  \"metalWeight\": 5.5,\n  \"metalCost\": 500,\n  \"metalPrice\": 750,\n  \"stock\": 10,\n  \"defaultImages\": [\"https://example.com/image1.jpg\", \"https://example.com/image2.jpg\"],\n  \"variantImages\": [\"https://example.com/variant1.jpg\"],\n  \"availableMetalTypes\": [\"14k_yellow_gold\", \"14k_white_gold\", \"18k_yellow_gold\"],\n  \"availableShapes\": [\"round\", \"princess\", \"cushion\"],\n  \"readyToShip\": false,\n  \"engravingAllowed\": true,\n  \"active\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/products",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "products"]
            },
            "description": "Create a new product (Admin only). Requires admin authentication token."
          }
        },
        {
          "name": "Update Product",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productName\": \"Updated Product Name\",\n  \"description\": \"Updated description\",\n  \"metalPrice\": 850,\n  \"stock\": 15,\n  \"active\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/products/{{product_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "products", "{{product_id}}"]
            },
            "description": "Update an existing product by ID (Admin only). You can update any field partially."
          }
        },
        {
          "name": "Delete Product",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/products/{{product_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "products", "{{product_id}}"]
            },
            "description": "Permanently delete a product by ID (Admin only)"
          }
        },
        {
          "name": "Deactivate Product",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/products/{{product_id}}/deactivate",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "products", "{{product_id}}", "deactivate"]
            },
            "description": "Deactivate a product (sets active=false). The product will not appear in user-facing APIs."
          }
        },
        {
          "name": "Activate Product",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/admin/products/{{product_id}}/activate",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "products", "{{product_id}}", "activate"]
            },
            "description": "Activate a product (sets active=true)"
          }
        },
        {
          "name": "Bulk Upload Products (Excel)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "Select your Excel file (.xlsx) with product data"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/admin/products/bulk-sku",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "products", "bulk-sku"]
            },
            "description": "Bulk upload/update products via Excel file. Required columns: productSku, product_name. Optional: description, categories, style, stock, metal_type, shape, metal_weight, metal_cost, metal_price, availability, defaultImg_1, defaultImg_2, variant1-4, availableMetalTypes, availableShapes, readyToShip, engravingAllowed, active."
          }
        }
      ]
    },
    {
      "name": "4. Health Check",
      "item": [
        {
          "name": "Root Health Check",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/",
              "host": ["{{base_url}}"],
              "path": [""]
            },
            "description": "Basic health check at root endpoint"
          }
        },
        {
          "name": "API Health Check",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/health",
              "host": ["{{base_url}}"],
              "path": ["api", "health"]
            },
            "description": "API health check endpoint"
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "admin_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "product_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "category_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "style_id",
      "value": "",
      "type": "string"
    }
  ]
}
